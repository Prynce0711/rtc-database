// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "sqlite"
}

enum Roles {
  admin
  user
  atty
}

enum CaseType {
  CRIMINAL
  CIVIL
  LAND_REGISTRATION_CASE
  PETITION
  ELECTION
  SCA
  UNKNOWN
}

enum Status {
  INACTIVE
  ACTIVE
  DEACTIVATED
  PENDING
  SUSPENDED
  TERMINATED
}

enum BloodType {
  A_Positive
  A_Negative
  B_Positive
  B_Negative
  AB_Positive
  AB_Negative
  O_Positive
  O_Negative
}

enum LogAction {
  LOGIN_SUCCESS
  LOGIN_FAILED
  LOGOUT
  CREATE_CASE
  UPDATE_CASE
  DELETE_CASE
  IMPORT_CASES
  EXPORT_CASES
  CREATE_EMPLOYEE
  UPDATE_EMPLOYEE
  DELETE_EMPLOYEE
  IMPORT_EMPLOYEES
  EXPORT_EMPLOYEES
  CREATE_USER
  UPDATE_ROLE
  DEACTIVATE_USER
  REACTIVATE_USER
}

model Case {
  id              Int       @id @default(autoincrement())
  caseType       CaseType   @default(UNKNOWN)
  branch          String
  assistantBranch String
  caseNumber      String    @unique
  dateFiled       DateTime
  name            String
  charge          String
  infoSheet       String
  court           String
  detained        Boolean
  consolidation   String
  eqcNumber       Int?
  bond            Float?
  raffleDate      DateTime?
  committe1       Int?
  committe2       Int?
  Judge           String?
  AO              String?
  Complainant     String?
  HouseNo         String?
  Street          String?
  Barangay        String?
  Municipality    String?
  Province        String?
  Counts          String?
  Jdf             Float?
  Sajj            Float?
  Sajj2           Float?
  MF              Float?
  STF             Float?
  LRF             Float?
  VCF             Float?
  Total           Float?
  AmountInvolved  Float?
  createdAt DateTime @default(now())
}

model Employee{
  id          Int     @id @default(autoincrement())
  employeeName String
  employeeNumber String? @unique
  position    String
  branch     String
  tinNumber   String?
  gsisNumber String?
  philHealthNumber String?
  pagIbigNumber String?
  birthDate   DateTime
  bloodType   BloodType?
  allergies    String?
  height      Float?
  weight      Float?
  contactPerson String
  contactNumber String?
  email       String?
  createdAt DateTime @default(now())
}

model Log {
  id          Int       @id @default(autoincrement())
  action      LogAction

  // stores additional details about the log entry
  // id when creating or deleting
  // from and to when updating
  details     Json?

  timestamp   DateTime  @default(now())
  userId      String?
  user        User?      @relation(fields: [userId], references: [id], onDelete: Cascade)
  ipAddress   String?
  userAgent   String?
  createdAt DateTime @default(now())
}

model User {
  id            String    @id
  name          String
  email         String
  emailVerified Boolean   @default(false)
  image         String?
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  role          Roles     @default(user)
  banned        Boolean?  @default(false)
  banReason     String?
  banExpires    DateTime?
  sessions      Session[]
  accounts      Account[]

  status       Status   @default(PENDING)

  Logs         Log[]


  @@unique([email])
  @@map("user")
}

model Session {
  id             String   @id
  expiresAt      DateTime
  token          String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  ipAddress      String?
  userAgent      String?
  userId         String
  user           User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  impersonatedBy String?

  @@unique([token])
  @@index([userId])
  @@map("session")
}

model Account {
  id                    String    @id
  accountId             String
  providerId            String
  userId                String
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  status                Status    @default(PENDING)

  @@index([userId])
  @@map("account")
}

model Verification {
  id         String   @id
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([identifier])
  @@map("verification")
}

model RecievingLog{
  id         Int       @id @default(autoincrement())
  bookAndPage String?
  dateRecieved DateTime?
  caseType     CaseType @default(UNKNOWN)
  caseNumber String?
  content String?
  branchNumber String?
  notes String?
  createdAt DateTime @default(now())
}

model Petition {
  id              Int       @id @default(autoincrement())
  caseNumber      String    @unique
  petitioner  String?
  raffledTo String?
  date       DateTime?
  nature         String?
  createdAt DateTime @default(now())
}

model SpecialProceeding {
  id              Int       @id @default(autoincrement())
  caseNumber      String    @unique
  petitioner  String?
  raffledTo String?
  date       DateTime?
  nature         String?
  respondent String?
  createdAt DateTime @default(now())
}